## TableApp 現行仕様・要求一覧（分類）
1. データ構造・入力

| 項目      | 内容                  | 備考                                    |
| ------- | ------------------- | ------------------------------------- |
| データ形式   | 単一 JSON から取得        | `columns:[{key,label}]`, `rows:[{…}]` |
| フィルター属性 | 別 JS で渡す            | `{colKey: "select" "range"}`          |
| 列・行生成   | JSON に基づき動的生成       | HTML 上には初期 tbody/tr なし         |
| 画像プレビュー | 行選択時に該当行の `img` を表示 | `<img id="row-preview">` 参照   |

2. テーブル構造

| 項目     | 内容                    | 備考                               |
| ------ | --------------------- | -------------------------------- |
| ヘッダー   | JSON `columns` から自動生成 | 各列にソートボタン付き                      |
| フィルター行 | ヘッダーの下に自動生成           | range は min/max 横並び、select は単一入力 |
| tbody  | 仮想スクロール対応             | 表示行のみ描画、上下 padding で空間確保         |

3. ソート

| 項目     | 内容             | 備考               |
| ------ | -------------- | ---------------- |
| 対象     | 各列にボタン         | `data-key` で列を特定 |
| 表示     | △▽ → ▲▽ → △▼   | ユーザーの指定通り維持      |
| 他列との関係 | 排他（1列のみソート状態）  | クリックで他列リセット      |
| 自動判定   | 数値と文字列を判定してソート | parseFloat で判断   |

4. フィルター

| 項目  | 内容                       | 備考                  |
| --- | ------------------------ | ------------------- |
| 列ごと | 複数列フィルター対応               | JSON から生成された列に対応    |
| 種類  | select / range           | range は min/max 横並び |
| 入力  | input イベントと change イベント  | 値変更で即時 render       |
| 判定  | AND 条件（全てのフィルターを通す行のみ表示） | 外部 filterTypes に従う  |

5. ページング

| 項目     | 内容                            | 備考          |
| ------ | ----------------------------- | ----------- |
| 表示件数   | 5/10/20 など選択可能                | select で切替  |
| 前後ボタン  | Prev / Next                   | 範囲チェックあり    |
| 直接入力   | 現在ページ番号を入力可能                  | 1〜総ページ数まで制限 |
| 総ページ表示 | `<span id="total-pages">` に表示 | 自動更新        |

6. 行選択・操作

| 項目     | 内容                      | 備考                                 |
| ------ | ----------------------- | ---------------------------------- |
| クリック選択 | tr をクリックで選択             | 選択行背景色 `selected`                  |
| 矢印キー   | ArrowUp / ArrowDown で移動 | 範囲チェック、スクロール into view             |
| 選択連動   | 画像プレビュー更新               | `imgPreview.src = selectedRow.img` |

7. 仮想スクロール（パフォーマンス対策）

| 項目         | 内容                                 | 備考                    |
| ---------- | ---------------------------------- | --------------------- |
| tbody 表示   | 可視範囲 + バッファ行のみ描画                   | bufferRows で上下余裕      |
| 上下 padding | 表示されない行の分だけ paddingTop/Bottom      | 実質スクロール位置維持           |
| スクロールイベント  | `scroll` イベントで visibleStart/End 更新 | #renderVirtual() 呼び出し |

8. 列幅同期

| 項目                  | 内容                                             | 備考               |
| ------------------- | ---------------------------------------------- | ---------------- |
| thead と tbody の列幅同期 | `#syncColumnWidths()`                          | tbody 内行生成後に呼び出し |
| display 設定          | thead/tr: table, tbody/tr: table, tbody: block | CSS で固定幅レイアウト    |

9. CSS・レイアウト

| 項目      | 内容                                    | 備考         |
| ------- | ------------------------------------- | ---------- |
| 固定レイアウト | table-layout: fixed                   | 列幅同期用      |
| スクロール   | div.table-container で overflow-y:auto | 高さ指定 300px |
| 選択行     | tr.selected 背景色                       | 薄青系        |
| フィルター入力 | range: min/max 横並び                    | 幅 45%ずつ    |

10. その他仕様

| 項目                       | 内容                     | 備考                                    |
| ------------------------ | ---------------------- | ------------------------------------- |
| メソッド構成                   | TableApp.Table 内に全機能実装 | プライベートメソッド `#` で分類                    |
| JSDoc                    | 全メソッド・入出力明記            | render、#renderVirtual、#passesFilter 等 |
| ソート／フィルター／ページング／スクロール／選択 | 全てメイン render に統合       | 順次処理 |
